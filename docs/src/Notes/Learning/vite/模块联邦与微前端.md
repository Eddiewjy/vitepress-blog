# Module Federation
核心：允许多个已部署的独立应用在运行时动态地共享代码
背景：

模块联邦（Module Federation）是 Webpack 5 引入的一项重要特性，主要用于解决前端微前端架构和大型应用模块共享中的几个关键问题：

1. **动态代码共享** 传统的前端应用中，模块共享通常依赖于静态的依赖引入和打包。模块联邦允许在运行时动态地共享模块，不同的应用可以实时加载和共享彼此的代码，极大地提高了代码复用的灵活性。
2. **微前端架构解耦** 在微前端架构中，不同团队开发的应用需要能够独立部署和开发，同时又能无缝集成。
3. **依赖共享和优化** 避免加载相同依赖；显著减小bundle体积
4. **跨应用协作** 更灵活的代码复用；可插拔的应用架构

有两种方法可以在程序间共享代码：
1. package sharing。两个程序导入一个共同的外部模块，当外部模块需要更新时候，必须重新部署这两个程序。
	- pros：较好的ts支持；方便单测；完整的应用
	- cons：部署时间成本高
2. runtime sharing。假设一个程序内部有需要提高给外部的组件，通过模块联邦暴露出这个组件后其他程序就可以动态地使用该组件，无需重复部署。
	- pros：快捷方便
	- cons：ts支持不完善；不方便单测。

需要注意的是，模块联邦本身只共享代码，如果需要共享状态则依赖Jotai这种状态管理器。（why jotai： 简单轻量灵活。原子化的状态可以降低耦合度，当你需要共享一个状态时，就新建一个atom）