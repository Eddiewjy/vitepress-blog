# 简单介绍和约定

Rollup插件本身是一个需要属性、构建钩子、输出构建钩子的特定对象

## 何为Rollup钩子

说人话就是rollup在构建的时候不同阶段用的函数。分为`构建钩子`和`输出生成钩子`比如构建开始的时候使用`buildStart`，输出结束的时候使用`generateBundle`。

## 实战：开发一个路由分析插件

```mermaid
flowchart TD
    A[开始] --> B[创建插件实例]
    B --> C[调用 buildStart 钩子]

    C --> D[解析页面目录路径]
    D --> E[查找符合条件的文件]

    E --> F{文件存在?}
    F -->|是| G[递归遍历目录]
    F -->|否| H[返回空数组]

    G --> I[收集符合扩展名的文件]
    I --> J[处理收集到的文件]

    J --> K[生成路由信息]
    K --> L[处理目录部分]
    L --> M[处理文件名部分]
    M --> N[生成路由路径和参数信息]

    N --> O[生成路由代码]
    O --> P[创建导入语句]
    P -->|动态导入| Q["() => import('路径')"]
    P -->|静态导入| R["require('路径').default"]

    Q --> S[组装完整路由对象]
    R --> S

    S --> T[写入文件]
    T --> U[输出日志信息]
    U --> V[结束]
```

该插件能够在构建开始时解析指定目录下的路由文件，并生成路由信息。它会递归遍历目录，查找符合条件的文件，并根据文件名和路径生成路由对象。最后，它会将生成的路由信息写入文件，并输出日志信息。

在代码中使用了`buildStart`钩子这一rollup常用的钩子函数。该钩子在构建开始时被调用，可以用于初始化插件的状态或执行一些准备工作。
